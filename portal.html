<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DANHS Student Portal</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f9; margin: 0; padding: 0; }
    header { background: #0056b3; color: white; padding: 1rem; text-align: center; }
    main { padding: 2rem; }
    .login, .portal { max-width: 400px; margin: auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
    h2 { margin-top: 0; }
    input, button { width: 100%; padding: 10px; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: 8px; text-align: center; }
    .admin { background: #fff3cd; padding: 1rem; border-radius: 6px; margin-top: 1rem; }
  </style>
</head>
<body>
  <header>
    <h1>Datu Ayunan National High School</h1>
    <p>Student Portal</p>
  </header>
  <main>
    <!-- Login Form -->
    <div id="login" class="login">
      <h2>Login</h2>
      <input type="text" id="lrn" placeholder="Enter LRN">
      <input type="text" id="name" placeholder="Enter Full Name">
      <input type="password" id="password" placeholder="Enter Password">
      <button onclick="login()">Login</button>
      <p id="error" style="color:red;"></p>
    </div>

    <!-- Portal Page -->
    <div id="portal" class="portal" style="display:none;">
      <h2>Welcome, <span id="studentName"></span></h2>
      <table id="gradesTable">
        <tr>
          <th>Subject</th>
          <th>Q1</th>
          <th>Q2</th>
          <th>Q3</th>
          <th>Q4</th>
        </tr>
      </table>
      <div id="adminPanel" class="admin" style="display:none;">
        <h3>Admin Panel: Edit Grades</h3>
        <input type="text" id="editLRN" placeholder="Student LRN">
        <input type="text" id="editSubject" placeholder="Subject">
        <input type="number" id="editQuarter" placeholder="Quarter (1-4)">
        <input type="number" id="editGrade" placeholder="Grade">
        <button onclick="editGrade()">Save Grade</button>
      </div>
    </div>
  </main>

  <script>
    // Example student data
    let users = [
      { lrn: "0000", name: "Elman Admin", password: "admin", role: "admin", grades: {} },
      { lrn: "1234", name: "Juan Dela Cruz", password: "pass123", role: "student",
        grades: { Math: [90, 85, 88, 92], English: [88, 90, 84, 86] } },
      { lrn: "5678", name: "Maria Santos", password: "hello", role: "student",
        grades: { Math: [78, 82, 80, 85], Science: [90, 92, 89, 91] } }
    ];

    let currentUser = null;

    function login() {
      const lrn = document.getElementById("lrn").value;
      const name = document.getElementById("name").value;
      const password = document.getElementById("password").value;
      const user = users.find(u => u.lrn === lrn && u.name === name && u.password === password);

      if (user) {
        currentUser = user;
        document.getElementById("login").style.display = "none";
        document.getElementById("portal").style.display = "block";
        document.getElementById("studentName").textContent = user.name;
        loadGrades(user);

        if (user.role === "admin") {
          document.getElementById("adminPanel").style.display = "block";
        }
      } else {
        document.getElementById("error").textContent = "Invalid login. Please try again.";
      }
    }

    function loadGrades(user) {
      const table = document.getElementById("gradesTable");
      table.innerHTML = `<tr>
        <th>Subject</th>
        <th>Q1</th>
        <th>Q2</th>
        <th>Q3</th>
        <th>Q4</th>
      </tr>`;
      for (const subject in user.grades) {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${subject}</td>
          ${user.grades[subject].map(g => `<td>${g}</td>`).join("")}`;
        table.appendChild(row);
      }
    }

    function editGrade() {
      if (currentUser.role !== "admin") return;

      const lrn = document.getElementById("editLRN").value;
      const subject = document.getElementById("editSubject").value;
      const quarter = parseInt(document.getElementById("editQuarter").value);
      const grade = parseInt(document.getElementById("editGrade").value);

      const student = users.find(u => u.lrn === lrn);
      if (!student) { alert("Student not found!"); return; }

      if (!student.grades[subject]) student.grades[subject] = [null, null, null, null];
      student.grades[subject][quarter - 1] = grade;

      if (student.lrn === currentUser.lrn) loadGrades(student);
      alert("Grade updated successfully!");
    }
  </script>
</body>
</html>
